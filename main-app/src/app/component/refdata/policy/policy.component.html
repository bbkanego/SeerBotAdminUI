<div class="container-fluid" *ngIf="policyForm">
  <div class="row">
    <div class="col-sm-12">
      <h1 class="page-header">
        {{ policyModel.id === null ? getResourceLocal('maintainPolicy.pageHeadingCreate') : getResourceLocal('maintainPolicy.pageHeadingEdit') }}
      </h1>
    </div>
  </div>
  <form [formGroup]="policyForm" (ngSubmit)="onSubmit()" novalidate>
    <div class="row">
      <div class="col-sm-12">
        <div class="table-box">
          <div class="content padded">
            <div class="row">
              <div class="col-lg-6 col-sm-12">
                <app-bk-input
                  [currentFormGroup]="policyForm"
                  label="{{ getCommonResources('entity.name') }}"
                  currentFormControlName="name"
                ></app-bk-input>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <app-bk-textarea
                  [currentFormGroup]="policyForm"
                  label="{{ getCommonResources('entity.description') }}"
                  currentFormControlName="description"
                ></app-bk-textarea>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12">
                {{ getResourceLocal('maintainPolicy.statementHeading') }}
              </div>
            </div>
            <div
              class="row"
              *ngFor="let statement of statements.controls; let i = index">
              <div class="col-lg-1 col-sm-12">
                <span *ngIf="statements.controls.length > 0"
                      (click)="addStatement()"
                      class="custom-glyphicon glyphicon glyphicon-plus-sign"></span>
                <span *ngIf="i !== 0 && statements.controls.length > 0"
                  (click)="removeCurrentStatement(i)"
                  class="custom-glyphicon glyphicon glyphicon-remove-sign"></span>
              </div>
              <div class="col-lg-4 col-sm-12">
                <app-bk-select
                  [currentFormGroup]="statement"
                  label="{{ getResourceLocal('maintainPolicy.resource') }}"
                  [options]="resourcesOptions"
                  (onSelect)="processResourceSelection($event, statement)"
                  currentFormControlName="resourceCode"
                ></app-bk-select>
              </div>
              <div class="col-lg-4 col-sm-12">
                <app-bk-select
                  [currentFormGroup]="statement"
                  label="{{ getResourceLocal('maintainPolicy.effect') }}"
                  [options]="effectsOptions"
                  
                  currentFormControlName="effect"
                ></app-bk-select>
              </div>
              <div class="col-lg-3 col-sm-12">
                <app-bk-multi-select
                  [currentFormGroup]="statement"
                  controlId="multiSelectCategoryId"
                  (onSelect)="processSelectedValues($event, statement)"
                  [options]="actionsOptions"
                  [startingValues]='multiSelectStartValuesArray[i]'
                  label="{{ getResourceLocal('maintainPolicy.action') }}"
                  currentFormControlName="selectActions"
                >
                </app-bk-multi-select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div style="margin-bottom: 1em" class="col-sm-12">
      <bk-button
        intent="success"
        [disabled]="!policyForm.valid"
        type="submit"
        label="{{ getCommonResources('saveButton') }}"
      ></bk-button
      ><bk-button
        (onClick)="revert()"
        intent="warning"
        label="{{ getCommonResources('revertButton') }}"
      ></bk-button
      >&nbsp;<bk-button
        (onClick)="cancel()"
        intent="danger"
        label="{{ getCommonResources('cancelButton') }}"
      ></bk-button>
    </div>
  </form>
</div>
